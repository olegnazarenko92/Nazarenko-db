# Олег Назаренко - «Резервное копирование баз данных» 

### Задание 1. Резервное копирование

### Кейс
Финансовая компания решила увеличить надёжность работы баз данных и их резервного копирования. 

Необходимо описать, какие варианты резервного копирования подходят в случаях: 

### 1.1. Необходимо восстанавливать данные в полном объёме за предыдущий день.

Поскольку необходимо восстанавливать данные в полном объеме за каждый день, то, на мой взгляд, подойдет инкрементное копирование.
В данном случае мы имеем четкий график восстановления бэкапов, т.е. заранее известное количество точек восстановления. Поскольку необходимо делать восстановление каждый день, мы не загружаем систему полным копированием и экономим место на диске, а также повышаем скорость копирования, т.к. нам важны изменения, которые происходят каждый день. Однако, если база данных совсем небольшая (до 1 гб), то подойдет и полное копирование, сильно существенной разницы не будет.


### 1.2. Необходимо восстанавливать данные за час до предполагаемой поломки.

Поскольку мы ограничены по времени и нам необходимо быстрое и оперативное восстановление данных, нам подойдем дифференциальное копирование - небольшой объем резервной копии и высокая скорость создания. В данной ситуации скорость создания является решающим критерием выбора.


### 1.3.* Возможен ли кейс, когда при поломке базы происходило моментальное переключение на работающую или починенную базу данных.
Да, возможен, при настроенной репликации - когда падает master, slave становится сразу мастером и имеем работоспособную неповрежденную базу. 


### Задание 2. PostgreSQL

### 2.1. С помощью официальной документации приведите пример команды резервирования данных и восстановления БД (pgdump/pgrestore).
В PostgreSQL есть встроенный инструмент для создания резервных копий — утилита pg_dump. Пример выполнения данной команды: pg_dump <параметры> <имя базы> > <файл для сохранения копии>.


### 2.1.* Возможно ли автоматизировать этот процесс? Если да, то как?
Для автоматизации процесса возможно воспользоваться планировщиком crontab - crontab -e
3 0 * * * /etc/scripts/pgsql_dump.sh # postgres pg dump

---

### Задание 3. MySQL

3.1. С помощью официальной документации приведите пример команды инкрементного резервного копирования базы данных MySQL. 

3.1.* В каких случаях использование реплики будет давать преимущество по сравнению с обычным резервным копированием?

*Приведите ответ в свободной форме.*

---

Задания, помеченные звёздочкой, — дополнительные, то есть не обязательные к выполнению, и никак не повлияют на получение вами зачёта по этому домашнему заданию. Вы можете их выполнить, если хотите глубже шире разобраться в материале.
